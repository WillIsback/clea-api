=== Tests de recherche démarrés le 2025-05-05 19:06:14.306281 ===

INFO: 2025-05-05 19:06:14.307104 -- === TEST: Évaluation de la confidence ===

INFO: 2025-05-05 19:06:16.113618 -- Scores élevés: [0.8, 0.7, 0.65, 0.6] → Confidence: 0.9

INFO: 2025-05-05 19:06:16.113737 -- Scores faibles: [-7.0, -8.5, -9.0, -10.0] → Confidence: 0.1

INFO: 2025-05-05 19:06:16.113787 -- Scores moyens: [-2.0, -1.5, -1.0, -0.5] → Confidence: 0.1

INFO: 2025-05-05 19:06:16.113824 -- Sans scores → Confidence: 0.0

INFO: 2025-05-05 19:06:16.121629 -- === TEST: Normalisation des scores ===

INFO: 2025-05-05 19:06:17.948730 -- Scores originaux: [0.8, 0.2, 0.5, 0.9, 0.1]

INFO: 2025-05-05 19:06:17.948829 -- Scores normalisés: [0.875, 0.125, 0.5, 1.0, 0.0]

INFO: 2025-05-05 19:06:17.948862 -- Liste vide → Normalisée: []

INFO: 2025-05-05 19:06:17.948898 -- Scores identiques: [0.5, 0.5, 0.5, 0.5] → Normalisés: [1.0, 1.0, 1.0, 1.0]

INFO: 2025-05-05 19:06:17.948935 -- Scores mixtes: [-10.0, -5.0, 0.0, 5.0, 10.0] → Normalisés: [0.0, 0.25, 0.5, 0.75, 1.0]

INFO: 2025-05-05 19:06:17.956588 -- === TEST: Détection des requêtes hors domaine ===

INFO: 2025-05-05 19:06:19.988445 -- Requête hors domaine - Scores: [-8.5, -7.2, -6.9, -9.0]

INFO: 2025-05-05 19:06:19.988551 -- Niveau de confidence: 0.1, Message: Requête probablement hors du domaine de connaissances.

INFO: 2025-05-05 19:06:21.755979 -- Avec seuil bas - Niveau de confidence: 0.4

INFO: 2025-05-05 19:06:21.756100 -- ✅ Test de détection hors domaine réussi

INFO: 2025-05-05 19:06:21.764496 -- === TEST: Recherche hybride complète ===

INFO: 2025-05-05 19:06:21.764592 -- Création de 3 documents de test pour la recherche

INFO: 2025-05-05 19:06:25.923947 -- Génération des embeddings pour les chunks de test...

INFO: 2025-05-05 19:06:25.974656 -- Documents créés avec succès dans le corpus cd8e6b67-6c11-450d-899e-da0c7c513267, 11 chunks embeddings générés

INFO: 2025-05-05 19:06:27.723403 -- Test 1: Recherche simple

INFO: 2025-05-05 19:06:27.794822 -- Résultats trouvés: 5

INFO: 2025-05-05 19:06:27.794929 -- Niveau de confidence: 0.4

INFO: 2025-05-05 19:06:27.794962 -- Test 2: Recherche avec filtres

INFO: 2025-05-05 19:06:27.822125 -- Avec filtres - Résultats: 0

INFO: 2025-05-05 19:06:27.822224 -- Test 3: Requête potentiellement hors contexte

INFO: 2025-05-05 19:06:27.849452 -- Requête hors contexte - Niveau de confidence: 0.1

INFO: 2025-05-05 19:06:27.849559 -- Message: Requête probablement hors du domaine de connaissances.

INFO: 2025-05-05 19:06:27.849604 -- ✅ Test de recherche hybride réussi

INFO: 2025-05-05 19:06:27.850962 -- === TEST: Filtrage par pertinence ===

INFO: 2025-05-05 19:06:31.554990 -- Score et résultat Avec filtre level=0.1 message='Requête probablement hors du domaine de connaissances.' stats={'min': -11.25518798828125, 'max': -10.86037826538086, 'avg': -11.115950870513917, 'median': -11.164199352264404}

INFO: 2025-05-05 19:06:31.555088 -- Chunk 41790 a un score -10.86037826538086 et un thème Informatique

INFO: 2025-05-05 19:06:31.555124 -- Chunk 41793 a un score -10.89120101928711 et un thème Finance

INFO: 2025-05-05 19:06:31.555153 -- Chunk 41796 a un score -11.005934715270996 et un thème Marketing

INFO: 2025-05-05 19:06:31.555181 -- Chunk 41795 a un score -11.144618034362793 et un thème Finance

INFO: 2025-05-05 19:06:31.555208 -- Chunk 41736 a un score -11.15650463104248 et un thème Thème générique

INFO: 2025-05-05 19:06:31.555235 -- Chunk 41792 a un score -11.171894073486328 et un thème Informatique

INFO: 2025-05-05 19:06:31.555262 -- Chunk 41798 a un score -11.173880577087402 et un thème Marketing

INFO: 2025-05-05 19:06:31.555289 -- Chunk 41791 a un score -11.245878219604492 et un thème Informatique

INFO: 2025-05-05 19:06:31.555316 -- Chunk 41794 a un score -11.25403118133545 et un thème Finance

INFO: 2025-05-05 19:06:31.555343 -- Chunk 41797 a un score -11.25518798828125 et un thème Marketing

INFO: 2025-05-05 19:06:31.583468 -- Score et résultat Avec filtre level=0.1 message='Requête probablement hors du domaine de connaissances.' stats={'min': -11.25518798828125, 'max': -10.86037826538086, 'avg': -11.115950870513917, 'median': -11.164199352264404}

INFO: 2025-05-05 19:06:31.583600 -- Sans filtre: 10 résultats, Avec filtre: 0 résultats

INFO: 2025-05-05 19:06:31.583635 -- ✅ Test filter_by_relevance réussi

