<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="None" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Cléa-API Documentation</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="assets/_mkdocstrings.css" rel="stylesheet" />
        <link href="css/mkdocsoad.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Home";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> Cléa-API Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Home</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#caracteristiques-principales">Caractéristiques principales</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#structure-du-projet">Structure du projet</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#prerequis">Prérequis</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#etapes-dinstallation">Étapes d'installation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#utilisation">Utilisation</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#endpoints-principaux">Endpoints principaux</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#1-chargement-de-documents">1. Chargement de documents</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#2-traitement-des-documents">2. Traitement des documents</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#3-gestion-des-documents">3. Gestion des documents</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#4-recherche-hybride">4. Recherche hybride</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tests">Tests</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#executer-les-tests">Exécuter les tests</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#deploiement">Déploiement</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#docker">Docker</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#contribuer">Contribuer</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#licence">Licence</a>
    </li>
    </ul>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">REST API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="rest_api/">REST API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Python API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="doc_loader/">doc_loader</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="vectordb/">vectordb</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="pipeline/">pipeline</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">Cléa-API Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Home</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="clea-api">Cléa-API</h1>
<p>Cléa-API est un framework conçu pour le chargement de documents et la recherche hybride combinant la recherche vectorielle et basée sur les métadonnées. Il fournit des fonctionnalités CRUD pour gérer les documents et des endpoints pour effectuer des recherches avancées.</p>
<hr />
<h2 id="caracteristiques-principales"><strong>Caractéristiques principales</strong></h2>
<ul>
<li><strong>Chargement de documents</strong> : Extraction et traitement de documents dans divers formats (PDF, Word, JSON, etc.).</li>
<li><strong>Recherche hybride</strong> : Combinaison de la recherche vectorielle et basée sur les métadonnées.</li>
<li><strong>Gestion des documents</strong> : CRUD complet pour les documents.</li>
<li><strong>Extensibilité</strong> : Architecture modulaire pour ajouter facilement de nouvelles fonctionnalités.</li>
<li><strong>Support de PostgreSQL avec pgvector</strong> : Stockage et recherche vectorielle optimisés.</li>
</ul>
<hr />
<h2 id="structure-du-projet"><strong>Structure du projet</strong></h2>
<div class="highlight"><pre><span></span><code>.
├──<span class="w"> </span>clea_doc_loader<span class="w">       </span><span class="c1"># Module pour le chargement et l&#39;extraction de documents</span>
│<span class="w">   </span>├──<span class="w"> </span>api<span class="w">               </span><span class="c1"># Endpoints pour le chargement de documents</span>
│<span class="w">   </span>├──<span class="w"> </span>src<span class="w">               </span><span class="c1"># Logique métier pour l&#39;extraction de documents</span>
│<span class="w">   </span>└──<span class="w"> </span><span class="nb">test</span><span class="w">              </span><span class="c1"># Tests unitaires pour le module</span>
├──<span class="w"> </span>clea_pipeline<span class="w">         </span><span class="c1"># Module pour le traitement des documents</span>
│<span class="w">   </span>├──<span class="w"> </span>api<span class="w">               </span><span class="c1"># Endpoints pour le traitement des documents</span>
│<span class="w">   </span>├──<span class="w"> </span>src<span class="w">               </span><span class="c1"># Logique métier pour le pipeline de traitement</span>
│<span class="w">   </span>└──<span class="w"> </span><span class="nb">test</span><span class="w">              </span><span class="c1"># Tests unitaires pour le module</span>
├──<span class="w"> </span>clea_vectordb<span class="w">         </span><span class="c1"># Module pour la gestion des documents et la recherche</span>
│<span class="w">   </span>├──<span class="w"> </span>api<span class="w">               </span><span class="c1"># Endpoints pour la gestion et la recherche</span>
│<span class="w">   </span>├──<span class="w"> </span>src<span class="w">               </span><span class="c1"># Logique métier pour la base de données et la recherche</span>
│<span class="w">   </span>└──<span class="w"> </span><span class="nb">test</span><span class="w">              </span><span class="c1"># Tests unitaires pour le module</span>
├──<span class="w"> </span>demo<span class="w">                  </span><span class="c1"># Fichiers de démonstration pour tester les fonctionnalités</span>
├──<span class="w"> </span>main.py<span class="w">               </span><span class="c1"># Point d&#39;entrée principal de l&#39;application</span>
├──<span class="w"> </span>pyproject.toml<span class="w">        </span><span class="c1"># Configuration du projet Python</span>
├──<span class="w"> </span>requirements.txt<span class="w">      </span><span class="c1"># Liste des dépendances Python</span>
├──<span class="w"> </span>Dockerfile<span class="w">            </span><span class="c1"># Fichier Docker pour le déploiement</span>
├──<span class="w"> </span>start.sh<span class="w">              </span><span class="c1"># Script pour démarrer l&#39;application</span>
└──<span class="w"> </span>README.md<span class="w">             </span><span class="c1"># Documentation du projet</span>
</code></pre></div>
<hr />
<h2 id="installation"><strong>Installation</strong></h2>
<h3 id="prerequis"><strong>Prérequis</strong></h3>
<ul>
<li><strong>Python 3.11 ou supérieur</strong></li>
<li><strong>PostgreSQL</strong> avec l'extension <code>pgvector</code></li>
<li><strong>WSL (Windows Subsystem for Linux)</strong> avec OpenSUSE Tumbleweed (si applicable)</li>
</ul>
<h3 id="etapes-dinstallation"><strong>Étapes d'installation</strong></h3>
<ol>
<li><strong>Cloner le dépôt</strong></li>
</ol>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/votre-repo/clea-api.git
<span class="nb">cd</span><span class="w"> </span>clea-api
</code></pre></div>
<ol>
<li><strong>Installer les dépendances</strong></li>
</ol>
<p>Utilisez le gestionnaire de paquets <code>uv</code> pour installer les dépendances :</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div>
<ol>
<li><strong>Configurer les variables d'environnement</strong></li>
</ol>
<p>Créez un fichier .env à la racine du projet et configurez les variables suivantes :</p>
<div class="highlight"><pre><span></span><code>DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=clea_db
DB_HOST=localhost
DB_PORT=5432
API_HOST=localhost
API_PORT=8080
</code></pre></div>
<ol>
<li><strong>Initialiser la base de données</strong></li>
</ol>
<p>Lancez le script d'initialisation de la base de données :</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>python<span class="w"> </span>main.py
</code></pre></div>
<ol>
<li><strong>Démarrer l'application</strong></li>
</ol>
<p>Utilisez le script start.sh pour démarrer l'API :</p>
<div class="highlight"><pre><span></span><code>./start.sh
</code></pre></div>
<p>L'API sera disponible à l'adresse suivante : <a href="http://localhost:8080">http://localhost:8080</a>.</p>
<hr />
<h2 id="utilisation"><strong>Utilisation</strong></h2>
<h3 id="endpoints-principaux"><strong>Endpoints principaux</strong></h3>
<h4 id="1-chargement-de-documents"><strong>1. Chargement de documents</strong></h4>
<ul>
<li><strong>Endpoint</strong> : <code>/doc_loader/upload-file</code></li>
<li><strong>Méthode</strong> : <code>POST</code></li>
<li><strong>Description</strong> : Charge un fichier et extrait son contenu.</li>
<li><strong>Exemple de requête</strong> :</li>
</ul>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8080/doc_loader/upload-file&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-F<span class="w"> </span><span class="s2">&quot;file=@demo/demo.txt&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-F<span class="w"> </span><span class="s2">&quot;max_length=1000&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-F<span class="w"> </span><span class="s2">&quot;theme=Test&quot;</span>
</code></pre></div>
<h4 id="2-traitement-des-documents"><strong>2. Traitement des documents</strong></h4>
<ul>
<li><strong>Endpoint</strong> : <code>/pipeline/process-and-store</code></li>
<li><strong>Méthode</strong> : <code>POST</code></li>
<li><strong>Description</strong> : Traite un fichier et l'insère dans la base de données.</li>
<li><strong>Exemple de requête</strong> :</li>
</ul>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8080/pipeline/process-and-store&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-F<span class="w"> </span><span class="s2">&quot;file=@demo/demo.txt&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-F<span class="w"> </span><span class="s2">&quot;max_length=1000&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-F<span class="w"> </span><span class="s2">&quot;theme=Test&quot;</span>
</code></pre></div>
<h4 id="3-gestion-des-documents"><strong>3. Gestion des documents</strong></h4>
<ul>
<li><strong>Endpoint</strong> : <code>/database/add_document</code></li>
<li><strong>Méthode</strong> : <code>POST</code></li>
<li><strong>Description</strong> : Ajoute un document à la base de données.</li>
<li><strong>Exemple de requête</strong> :</li>
</ul>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8080/database/add_document&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;[</span>
<span class="s1">           {</span>
<span class="s1">             &quot;title&quot;: &quot;Document de test&quot;,</span>
<span class="s1">             &quot;content&quot;: &quot;Ceci est un document de test.&quot;,</span>
<span class="s1">             &quot;theme&quot;: &quot;Test&quot;,</span>
<span class="s1">             &quot;document_type&quot;: &quot;TXT&quot;,</span>
<span class="s1">             &quot;publish_date&quot;: &quot;2025-01-01&quot;</span>
<span class="s1">           }</span>
<span class="s1">         ]&#39;</span>
</code></pre></div>
<h4 id="4-recherche-hybride"><strong>4. Recherche hybride</strong></h4>
<ul>
<li><strong>Endpoint</strong> : <code>/search/hybrid_search</code></li>
<li><strong>Méthode</strong> : <code>POST</code></li>
<li><strong>Description</strong> : Recherche des documents en combinant la recherche vectorielle et basée sur les métadonnées.</li>
<li><strong>Exemple de requête</strong> :</li>
</ul>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8080/search/hybrid_search&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">           &quot;query&quot;: &quot;exemple&quot;,</span>
<span class="s1">           &quot;theme&quot;: &quot;Test&quot;,</span>
<span class="s1">           &quot;top_k&quot;: 5</span>
<span class="s1">         }&#39;</span>
</code></pre></div>
<hr />
<h2 id="tests"><strong>Tests</strong></h2>
<h3 id="executer-les-tests"><strong>Exécuter les tests</strong></h3>
<p>Pour exécuter les tests unitaires, utilisez la commande suivante :</p>
<div class="highlight"><pre><span></span><code>uv<span class="w"> </span>run<span class="w"> </span>pytest
</code></pre></div>
<p>Les tests sont organisés par module dans les répertoires test, test et test.</p>
<hr />
<h2 id="deploiement"><strong>Déploiement</strong></h2>
<h3 id="docker"><strong>Docker</strong></h3>
<p>Un fichier Dockerfile est fourni pour déployer l'application dans un conteneur Docker.</p>
<ol>
<li><strong>Construire l'image Docker</strong> :</li>
</ol>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>clea-api<span class="w"> </span>.
</code></pre></div>
<ol>
<li><strong>Lancer le conteneur</strong> :</li>
</ol>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span>clea-api
</code></pre></div>
<hr />
<h2 id="contribuer"><strong>Contribuer</strong></h2>
<p>Les contributions sont les bienvenues ! Veuillez suivre les étapes suivantes pour contribuer :</p>
<ol>
<li>Forkez le dépôt.</li>
<li>Créez une branche pour votre fonctionnalité ou correction de bug.</li>
<li>Soumettez une pull request avec une description claire de vos modifications.</li>
</ol>
<hr />
<h2 id="licence"><strong>Licence</strong></h2>
<p>Ce projet est sous licence MIT. Consultez le fichier LICENSE pour plus d'informations.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="rest_api/" class="btn btn-neutral float-right" title="REST API">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="rest_api/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>

<!--
MkDocs version : 1.6.1
Build Date UTC : 2025-05-01 04:42:18.735209+00:00
-->
